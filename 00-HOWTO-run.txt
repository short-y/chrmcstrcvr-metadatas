# How to Run Your Chromecast Internet Radio App (KOZT & Generic)

This guide explains how to run the custom Chromecast internet radio receiver, specifically tailored for **KOZT - The Coast** but adaptable for other stations.

## 1. Setup Your Python Environment

The Python sender scripts (`play_kozt.py`, `play_radio_stream_v2.py`) require a virtual environment with dependencies.

1.  **Create and activate a virtual environment:**
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```
2.  **Install dependencies:**
    ```bash
    pip install pychromecast zeroconf requests
    ```

## 2. Hosting & Registration

Your receiver (`index.html`) is hosted on **GitHub Pages**:
*   **URL:** `https://short-y.github.io/chrmcstrcvr-metadatas/index.html`
*   **App ID:** `6509B35C` (Registered in Google Cast Console)

If you are developing, ensure your device serial number is registered in the [Google Cast SDK Developer Console](https://cast.google.com/publish).

## 3. Running the Sender Script (KOZT)

The primary script is `play_kozt.py`.

### Basic Usage (Play Audio)
Plays the KOZT stream on the specified device.
```bash
python3 play_kozt.py "Living Room TV"
```

### No-Stream Mode (For Smart Displays / Hubs)
Launches the receiver and updates metadata **without** playing the live radio stream audio (useful if you listen via a separate radio but want the display).
*   **Note:** This mode plays a *silent* loop to keep the screen active.
```bash
python3 play_kozt.py "Office Nest Hub" -ns
```

### Debugging & Logging
*   **Default:** Minimal output (Errors/Warnings only).
    ```bash
    python3 play_kozt.py "Device"
    ```
*   **Debug Mode:** Shows heartbeats and update intervals.
    ```bash
    python3 play_kozt.py "Device" --debug
    ```
*   **Verbose Mode:** Shows full internal logs (Cast communication).
    ```bash
    python3 play_kozt.py "Device" --verbose
    ```

### Pixel Tablet (Hub Mode) Instructions
The Pixel Tablet in Hub Mode has strict security and power-saving features that can block custom apps. Follow these steps:

1.  **Disable Screen Lock:** Go to *Settings > Security > Screen lock* and set it to **None**. (Required to bypass `USER_PENDING_AUTHORIZATION` on launch).
2.  **Launch:** Run the script:
    ```bash
    python3 play_kozt.py "Pixel Tablet" -ns
    ```
3.  **Dismiss Overlay:** The app will launch, but the screen may appear **faint or dimmed** initially. **Tap the screen once** to dismiss the system's media control overlay and brighten the UI.
4.  **Result:** The custom receiver should remain visible and prevent the screensaver/ambient mode.

## 4. Troubleshooting

*   **"USER_PENDING_AUTHORIZATION":** The device is locked or requires permission. Unlock the device or disable the screen lock.
*   **Screensaver appears:** The receiver went idle. Ensure you are using the latest version of `play_kozt.py` (which enables the silent loop) and the latest receiver (v5.26+).
*   **Faint UI:** Tap the screen to dismiss the system overlay.

## 5. Generic Usage

To play a different station:
```bash
python3 play_kozt.py "Bedroom Speaker" --url "http://stream.radioparadise.com/aac-128" --title "Radio Paradise" --no-kozt
```
